# java-filmorate

***Java-filmorate*** - приложение, которое умеет обрабатывать и хранить данные о пользователях и их любимых фильмах.  

**Применяемые технологии:** Spring Boot, Lombok, JDBC Template, H2, JUnit.  

**Основные возможности:**

 * Создание, редактирование, удаление данных пользователя;
 * Отправка запроса на добавление пользователя в список друзей (запрос можно принять или отклонить);
 * Получение списка общих друзей;
 * Создание, редактирование, удаление данных фильма;
 * Создание, редактирование, удаление данных режиссера;
 * Возможность оценить фильм (1-10);
 * Поиск фильмов по названию и режиссеру;
 * Создание, редактирование, удаление отзывов о просмотренном фильме;
 * Возможность поставить лайк/дизлайк отзыву;
   

![ER-diagram](ER-diagram.png)

* _users_ таблица пользователей
* _friends_ таблица для отображения связей друзей 
* _likes_ таблица для отображения связей лайков пользователей и фильмов
* _films_ таблица фильмов 
* _mpa_ таблица mpa-рейтингов фильмов 
* _genres_ таблица жанров фильмов
* _film_genres_ соединительная таблица для связи многие ко многим таблиц _films_ и _genres_

Получим всех пользователей:
```
SELECT *  
FROM users;
```

Получим все фильмы:
```
SELECT *  
FROM films;
```

Получим топ 5 фильмов:
```
SELECT f.name, COUNT(l.user_id) AS count_likes
FROM films AS f
LEFT JOIN likes AS l ON f.id = l.film_id
GROUP BY f.id
ORDER BY count_likes DESC
LIMIT 5;
```
